# CLAUDE.md

このファイルは、このリポジトリのコードを扱う際にClaude Code (claude.ai/code)
にガイダンスを提供します。

## プロジェクト概要

これは "safe-find" という名前のDeno
TypeScriptプロジェクトです。このプロジェクトは `find` と `fd`
コマンドの安全なラッパーである `safe-find` と `safe-fd`
を提供します。これらのラッパーは、元のコマンドの危険な `-exec`
系オプション（`-exec`, `-execdir`
など）を無効化し、セキュリティリスクを軽減します。

プロジェクトは `mise.toml` で指定されているDeno
2.xをランタイム管理に使用しています。

## 開発コマンド

- **safe-findの実行**: `deno run safe-find.ts`
- **safe-fdの実行**: `deno run safe-fd.ts`
- **テストの実行**: `deno task test` (または `deno test`)
- **テストのウォッチモード**: `deno task test:watch`

## プロジェクト構成

- `safe-find.ts` - `find` コマンドの安全なラッパー実装
- `safe-fd.ts` - `fd` コマンドの安全なラッパー実装
- `safe-find_test.ts` - safe-findのテストファイル
- `safe-fd_test.ts` - safe-fdのテストファイル
- `deno.jsonc` - Deno設定（実行可能ファイル定義、タスク、インポートマッピング）
- `mise.toml` - ツールバージョン管理 (Deno 2.x)

## 依存関係

プロジェクトは最小限の依存関係を使用しています：

- `@std/assert` - テストアサーション用のJSRライブラリ

## アーキテクチャ注記

このプロジェクトは2つの独立した実行可能ファイル（`safe-find.ts`、`safe-fd.ts`）からなるツール集です。各ファイルは
`deno.jsonc` の `bin`
セクションで実行可能ファイルとして定義されています。各ラッパーは元のコマンドの引数を解析し、危険なオプションを除去してから安全な形で実行します。

## セキュリティ機能

このプロジェクトの主要な目的は、`find` と `fd`
コマンドの安全なラッパーを提供することです：

- **危険なオプションの無効化**: `-exec`, `-execdir`, `-ok`, `-okdir`
  などの任意コマンド実行を可能にするオプションをフィルタリング
- **安全なファイル検索**:
  ファイル検索機能は保持しつつ、セキュリティリスクのある機能を除去
- **透明性**: 元のコマンドの使いやすさを維持しながら、危険な機能のみを制限
